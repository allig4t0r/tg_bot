Most interesting files:

*tg_bot.py* — main

*handlers.py* — all the handlers

*admin.py* — some additional methods for handlers

*db.py and outline.py* — context managers for local sqlite3 db and outline server respectively

Needed env variables:

BOT_MODE='PROD'
BOT_TOKEN_PROD
YDISK_CLIENT_ID
YDISK_CLIENT_SECRET
YDISK_CLIENT_TOKEN
OUTLINE_API_URL
OUTLINE_CERT